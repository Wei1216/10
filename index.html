<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>å–®å…ƒå - é¢çš„å¤§å°æ¯”è¼ƒ</title>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/justfont/open-huninn-font/dist/WebFont/jf-openhuninn.css">
Â Â 
<style>
Â  body {
Â  Â  margin: 0;
Â  Â  /* è¨­å®šåœ“é«”ä½œç‚ºä¸»è¦å­—é«” */
Â  Â  font-family: 'jf-openhuninn', 'PingFang TC', 'Microsoft JhengHei', sans-serif;
Â  Â  display: flex;
Â  Â  height: 100vh;
Â  Â  background: #f8f8f8;
Â  }
Â  
  /* æ­¥é©Ÿ 2: æ–°å¢ CSS è¦å‰‡å¯¦ç¾å³å´æ³¨éŸ³ (ç›´å¼æ³¨éŸ³) */
  ruby {
      display: inline-flex;
      flex-direction: column; /* è®“å…§å®¹å‚ç›´å †ç–Š */
      align-items: center;    /* è®“æ¼¢å­—å’Œæ³¨éŸ³æ°´å¹³ç½®ä¸­ */
      -webkit-ruby-position: right; /* WebKit (Chrome/Safari) å°ˆç”¨è¨­å®š */
      ruby-position: right;         /* æ¨™æº–è¨­å®š */
  }

  /* èª¿æ•´æ³¨éŸ³ (<rt>) çš„å®šä½å’Œé–“è· */
  rt {
      margin-left: 0.5em; /* èª¿æ•´æ³¨éŸ³å’Œæ¼¢å­—çš„è·é›¢ */
      line-height: 1.2;
  }

Â  /* === å·¦å´ï¼šé¸è™Ÿå™¨ === */
Â  .lottery-container {
Â  Â  flex: 0 0 200px;
Â  Â  background: rgba(255, 255, 255, 0.85);
Â  Â  border-right: 3px solid #98d0de;
Â  Â  display: flex;
Â  Â  flex-direction: column;
Â  Â  justify-content: center;
Â  Â  align-items: center;
Â  Â  box-shadow: 2px 0 8px rgba(0,0,0,0.1);
Â  Â  text-align: center;
Â  Â  padding: 20px;
Â  }

Â  .title { font-size: 20px; font-weight: bold; color: #333; margin-bottom: 10px; }
Â  .number-display {
Â  Â  width: 70px; height: 50px;
Â  Â  border: 3px solid #98d0de;
Â  Â  border-radius: 8px;
Â  Â  display: flex; justify-content: center; align-items: center;
Â  Â  background: linear-gradient(45deg, #f8f9ff, #e8ecff);
Â  }
Â  .number { font-size: 26px; font-weight: bold; color: #98d0de; }
Â  .progress-bar {
Â  Â  width: 120px; height: 6px;
Â  Â  background: #eee; border-radius: 3px;
Â  Â  margin: 10px auto; overflow: hidden;
Â  }
Â  .progress-fill {
Â  Â  height: 100%;
Â  Â  background: linear-gradient(45deg, #98d0de, #7bc4d4);
Â  Â  width: 0%;
Â  Â  transition: width 0.1s linear;
Â  }
Â  .status-text { font-size: 13px; color: #666; margin-top: 5px; }
Â  .lottery-btn {
Â  Â  margin-top: 15px;
Â  Â  padding: 6px 16px;
Â  Â  background: linear-gradient(45deg, #98d0de, #7bc4d4);
Â  Â  color: white;
Â  Â  border: none;
Â  Â  border-radius: 6px;
Â  Â  cursor: pointer;
Â  }

Â  .spinning { animation: spin 0.1s linear infinite; }
Â  @keyframes spin {
Â  Â  0% { transform: translateY(-20px); opacity: 0.5; }
Â  Â  50% { transform: translateY(0); opacity: 1; }
Â  Â  100% { transform: translateY(20px); opacity: 0.5; }
Â  }

Â  /* === å³å´ï¼šè·‘é¦¬ç‡ˆï¼åœ–ç‰‡é¡¯ç¤ºå€ === */
Â  #main-area {
Â  Â  flex: 1;
Â  Â  display: flex;
Â  Â  justify-content: center;
Â  Â  align-items: center;
Â  Â  flex-direction: column;
Â  Â  position: relative;
Â  }
Â  #marquee {
Â  Â  font-size: 2rem;
Â  Â  font-weight: bold;
Â  Â  color: #333;
Â  Â  text-align: center;
Â  Â  padding: 20px;
Â  }
Â  #main-image {
Â  Â  max-width: 90%;
Â  Â  max-height: 85%;
Â  Â  border-radius: 10px;
Â  Â  box-shadow: 0 4px 10px rgba(0,0,0,0.2);
Â  Â  display: none;
Â  }
Â  #start-btn {
Â  Â  margin-top: 30px;
Â  Â  padding: 10px 25px;
Â  Â  font-size: 1.2rem;
Â  Â  background: linear-gradient(45deg, #98d0de, #7bc4d4);
Â  Â  color: white;
Â  Â  border: none;
Â  Â  border-radius: 6px;
Â  Â  cursor: pointer;
Â  }
</style>
</head>
<body>

<div class="lottery-container">
Â  <div class="title"><ruby>é¸<rt>ã„’ã„©ã„¢Ë‡</rt></ruby><ruby>è™Ÿ<rt>ã„ã„ Ë‹</rt></ruby><ruby>å™¨<rt>ã„‘ã„§Ë‹</rt></ruby></div>
Â  <div class="number-display"><div class="number" id="numberDisplay">?</div></div>
Â  <div class="progress-bar"><div class="progress-fill" id="progressFill"></div></div>
Â  <div class="status-text" id="statusText"><ruby>ç­‰<rt>ã„‰ã„¥Ë‡</rt></ruby><ruby>å¾…<rt>ã„‰ã„Ë‹</rt></ruby><ruby>å•Ÿ<rt>ã„‘ã„§Ë‡</rt></ruby><ruby>å‹•<rt>ã„‰ã„¨ã„¥Ë‹</rt></ruby></div>
Â  <button class="lottery-btn" id="lotteryBtn"><ruby>æŠ½<rt>ã„”ã„¡</rt></ruby><ruby>è™Ÿ<rt>ã„ã„ Ë‹</rt></ruby><ruby>ç¢¼<rt>ã„‡ã„šË‡</rt></ruby></button>
</div>

<div id="main-area">
Â  <div id="marquee"><ruby>é»<rt>ã„‰ã„§ã„¢Ë‡</rt></ruby><ruby>æ“Š<rt>ã„ã„§ËŠ</rt></ruby>ã€Œ<ruby>é–‹<rt>ã„ã„</rt></ruby><ruby>å§‹<rt>ã„•Ë‡</rt></ruby><ruby>æŠ½<rt>ã„”ã„¡</rt></ruby><ruby>é¡Œ<rt>ã„Šã„§ËŠ</rt></ruby>ã€</div>
Â  <img id="main-image" src="">
Â  <button id="start-btn"><ruby>é–‹<rt>ã„ã„</rt></ruby><ruby>å§‹<rt>ã„•Ë‡</rt></ruby><ruby>æŠ½<rt>ã„”ã„¡</rt></ruby><ruby>é¡Œ<rt>ã„Šã„§ËŠ</rt></ruby></button>
</div>

<script>
/* ====== é¸è™Ÿå™¨æ§åˆ¶ï¼ˆç¨ç«‹é‹ä½œï¼‰ ====== */
let isRunning = false;
let animationInterval, progressInterval;

function getRandomNumber() {
Â  return Math.floor(Math.random() * 25) + 2; // 2~26
}

function startLottery() {
Â  if (isRunning) return;
Â  isRunning = true;

Â  const numberDisplay = document.getElementById('numberDisplay');
Â  const statusText = document.getElementById('statusText');
Â  const progressFill = document.getElementById('progressFill');

Â  numberDisplay.className = 'number spinning';
Â  // å°‡ 'æŠ½ç±¤ä¸­...' æ”¹ç‚ºå«æ³¨éŸ³
Â  statusText.innerHTML = '<ruby>æŠ½<rt>ã„”ã„¡</rt></ruby><ruby>ç±¤<rt>ã„‘ã„§ã„¢</rt></ruby><ruby>ä¸­<rt>ã„“ã„¨ã„¥</rt></ruby>...';
Â  progressFill.style.width = '0%';

Â  let progress = 0;
Â  const totalTime = 3000;
Â  const updateInterval = 50;

Â  animationInterval = setInterval(() => {
Â  Â  numberDisplay.textContent = getRandomNumber();
Â  }, 100);

Â  progressInterval = setInterval(() => {
Â  Â  progress += updateInterval;
Â  Â  progressFill.style.width = (progress / totalTime) * 100 + '%';
Â  Â  if (progress >= totalTime) clearInterval(progressInterval);
Â  }, updateInterval);

Â  setTimeout(() => {
Â  Â  clearInterval(animationInterval);
Â  Â  const finalNumber = getRandomNumber();
Â  Â  numberDisplay.textContent = finalNumber;
Â  Â  numberDisplay.className = 'number final-result';
Â  Â  // å°‡ç‹€æ…‹æ–‡å­—æ”¹ç‚ºå«æ³¨éŸ³
Â  Â  statusText.innerHTML = `ğŸ‰ <ruby>æŠ½<rt>ã„”ã„¡</rt></ruby><ruby>ä¸­<rt>ã„“ã„¨ã„¥</rt></ruby><ruby>è™Ÿ<rt>ã„ã„ Ë‹</rt></ruby><ruby>ç¢¼<rt>ã„‡ã„šË‡</rt></ruby>ï¼š${finalNumber}`;
Â  Â  progressFill.style.width = '100%';
Â  Â  isRunning = false;
Â  }, totalTime);
}

document.getElementById("lotteryBtn").onclick = startLottery;

/* æ­¥é©Ÿ 3: ä¿®æ”¹ questionPool ä¸­çš„æ‰€æœ‰æ–‡å­—ç‚º <ruby> æ ¼å¼ */
const questionPool = [
Â  { type: "A", text: "<ruby>é¡Œ<rt>ã„Šã„§ËŠ</rt></ruby><ruby>ç›®<rt>ã„‡ã„¨Ë‹</rt></ruby>ï¼š<ruby>æœ‰<rt>ã„§ã„¡Ë‡</rt></ruby><ruby>å¹³<rt>ã„†ã„§ã„¥ËŠ</rt></ruby><ruby>é¢<rt>ã„‡ã„§ã„¢Ë‹</rt></ruby><ruby>å—<rt>ã„‡ã„š</rt></ruby>", images: ["https://lh3.googleusercontent.com/sitesv/AICyYdbarS5pY_NVH8QpOD10DWz-WbDTi50AE8P2wUbffJxaqKz53jlq2_0-9w9r-ZrxWYWzQirHp8P6HJsn31pIn9amoMRRIFL5knSrJlKBQJ0NGC4CK1ekvH1MUVhaEQhi6fkEbLEZlS_V9hmlgKz7ck-G9VBoQSTSuAuNwginpwezi2jDl9C7QrCnHayLMkv1ifdEF4K5M6CyLgh37mfPfpYAPArct7LP5qkC=w1280"] },
Â  { type: "A", text: "<ruby>é¡Œ<rt>ã„Šã„§ËŠ</rt></ruby><ruby>ç›®<rt>ã„‡ã„¨Ë‹</rt></ruby>ï¼š<ruby>æœ‰<rt>ã„§ã„¡Ë‡</rt></ruby><ruby>å¹³<rt>ã„†ã„§ã„¥ËŠ</rt></ruby><ruby>é¢<rt>ã„‡ã„§ã„¢Ë‹</rt></ruby><ruby>å—<rt>ã„‡ã„š</rt></ruby>ï¼Ÿ", images: ["https://lh3.googleusercontent.com/sitesv/AICyYdaG8_9CznTTVvbvrlpwB8rpwQiY6FXGutOT3ZurqLthcbAGLDvSQpkPRVbszY0eYn-SPjJEd7hp3RhVgC8HEGb7hWuAaXkPzGjN8M2IBnOQgGif0iPOIQPkeXCZV8w2pC4xGpCnTj57x_OSa_JFOMHytWHgko7Y0oXejcFEx7C-1diRoYBj2FENXO0AQByqXKfivnA7ERTmwDNl7EXRY10Cgh-E66Bq3PPfEWI=w1280"] },
Â  { type: "A", text: "<ruby>é¡Œ<rt>ã„Šã„§ËŠ</rt></ruby><ruby>ç›®<rt>ã„‡ã„¨Ë‹</rt></ruby>ï¼š<ruby>æœ‰<rt>ã„§ã„¡Ë‡</rt></ruby><ruby>å¹³<rt>ã„†ã„§ã„¥ËŠ</rt></ruby><ruby>é¢<rt>ã„‡ã„§ã„¢Ë‹</rt></ruby><ruby>å—<rt>ã„‡ã„š</rt></ruby>ï¼Ÿ", images: ["https://lh3.googleusercontent.com/sitesv/AICyYdaES5TFi3dcJAfIvhEE_aCJ3cQKny3xaj2zq5mHhY9KVJnj3m6HPkHyOJR82HWc9IFs8WvBntw7yFlE-5lOSTCiewAMKbWWw6QLNHBqTtP9hSOiuaSJhYwfONgJdvRDFLxBDmezytPd6lz_NUpM9XdXRexudPDOMyZfKqx7kvnVVLC6n7KvR3K1lo5TinspI1jq_L7NBQ59XaAFLPdJ1apiL0I89ot8qgP6=w1280"] },

Â  { type: "B", text: "<ruby>é¡Œ<rt>ã„Šã„§ËŠ</rt></ruby><ruby>ç›®<rt>ã„‡ã„¨Ë‹</rt></ruby>ï¼š<ruby>å“ª<rt>ã„‹ã„šË‡</rt></ruby><ruby>å€‹<rt>ã„ã„œË‹</rt></ruby><ruby>é¢<rt>ã„‡ã„§ã„¢Ë‹</rt></ruby><ruby>æ¯”<rt>ã„…ã„§Ë‡</rt></ruby><ruby>è¼ƒ<rt>ã„ã„§ã„ Ë‹</rt></ruby><ruby>å¤§<rt>ã„‰ã„šË‹</rt></ruby>ï¼Ÿ", images: ["https://lh3.googleusercontent.com/sitesv/AICyYdYM7F52XUAk_pwUsfDvTgvgbLOTRZkc6fotajbqIIOzygzym9ruP9Kt4gbL-q1aNwwXD48XRKaUuqUCsQgg9oJ315gwt7qHhsleOvVu_idKEPdtETpPIaexUq--lha7uuc59P2AVaeUgpPVeMnCP5hucxB0rNyzP-R_hdLgXNI3_MEommFu9tOpCMVghqlTC84tyAgPMOBxnOjLIZk62NmUgIQiHnD0nyqwI2w=w1280"] },
Â  { type: "B", text: "<ruby>é¡Œ<rt>ã„Šã„§ËŠ</rt></ruby><ruby>ç›®<rt>ã„‡ã„¨Ë‹</rt></ruby>ï¼š<ruby>å“ª<rt>ã„‹ã„šË‡</rt></ruby><ruby>å€‹<rt>ã„ã„œË‹</rt></ruby><ruby>é¢<rt>ã„‡ã„§ã„¢Ë‹</rt></ruby><ruby>æ¯”<rt>ã„…ã„§Ë‡</rt></ruby><ruby>è¼ƒ<rt>ã„ã„§ã„ Ë‹</rt></ruby><ruby>å¤§<rt>ã„‰ã„šË‹</rt></ruby>ï¼Ÿ", images: ["https://lh3.googleusercontent.com/sitesv/AICyYdY5AhEF5w2G9soWEwcIH7ZWoioVqn1SZ5xOtpqbGfOZo3otC-6PFUaPRxnO4XHDMmEDIzoNFMfwChDDSAPSjgKQe-Seu9NG8xiydvhTsUmhgmTvWdwIBTKmTOA7fuS4Gb8KDpSrd-WsemGoO5-046msgzrwr2Y7NQkDWtcLmkQAFCeDnVvvZYPQmQjBkblAlsUxIw9keywXgGVa0OgmUlxE1tRt_77RZIQmFFA=w1280"] },
Â  { type: "B", text: "<ruby>é¡Œ<rt>ã„Šã„§ËŠ</rt></ruby><ruby>ç›®<rt>ã„‡ã„¨Ë‹</rt></ruby>ï¼š<ruby>å“ª<rt>ã„‹ã„šË‡</rt></ruby><ruby>å€‹<rt>ã„ã„œË‹</rt></ruby><ruby>é¢<rt>ã„‡ã„§ã„¢Ë‹</rt></ruby><ruby>æ¯”<rt>ã„…ã„§Ë‡</rt></ruby><ruby>è¼ƒ<rt>ã„ã„§ã„ Ë‹</rt></ruby><ruby>å¤§<rt>ã„‰ã„šË‹</rt></ruby>ï¼Ÿ", images: ["https://lh3.googleusercontent.com/sitesv/AICyYdZ3-GuoacguvzUFLUxFDLt_zQunNgH-D1bBHkCvSeGKGcMQIgyQsposAIOjBRZtoLKlWrZPvhCSctJUMeWWi3hz-KtaIHyIsFwMFjC03ND5y2sGgpy6Z7QAxvDNyu-8CuqydB0sRgBUvxVdl6R4aBRiIUSMgU2l8XgI-XBK_WTXA6zgdFzO3_K9NVPsDzTHJoOaE08nHW7gvDkHK2Uj5gw8WKnq0AjuT3UcslU=w1280"] },

Â  { type: "C", text: "<ruby>é¡Œ<rt>ã„Šã„§ËŠ</rt></ruby><ruby>ç›®<rt>ã„‡ã„¨Ë‹</rt></ruby>ï¼š<ruby>æ€<rt>ã„—ã„£Ë‡</rt></ruby><ruby>éº¼<rt>ã„‡ã„œË™</rt></ruby><ruby>æ¯”<rt>ã„…ã„§Ë‡</rt></ruby><ruby>è¼ƒ<rt>ã„ã„§ã„ Ë‹</rt></ruby>ï¼Ÿ", images: [
Â  Â  "https://lh3.googleusercontent.com/sitesv/AICyYdaeuh2Lo-lHI1t5hG_fy12xwjxrJit-Ba-YD0K9zs2nk8Sbvziz9cw0jInMiHIsTfTvz-YYF0D9PEeNezMyZOmhx18GCgS8GIfXv64nFuOFbqxmDhNVXMZzJiBt_qUjhmDM7mZT5hyh_oSj6nBzB1Xn5-IPc-IwIGPFZF11otRg24prYDQj4q-ChjCE1jW9y8UIOp_YSgw9ZoGhCqEPegLVSd5tHF0LR8NHo7o=w1280",
Â  Â  "https://lh3.googleusercontent.com/sitesv/AICyYdY6EEfBHgjWQ50nsArmuyBTmw7hb49VTskWI7DRR09Big2ZYW3YNIyiM0bqVBHkfbr7BvCLwJSFo7Rt4O4aOVvxnziF5EWVuAsIHbRqMb0zRLdXVe2dsqyvVUabdfg71dNO7-e4zL4guC_CDstCCZIHUMM_cr845zTKzRgWJLDdU1CPfVOkAn31qJxiIw1CU9nljvYLD-rvPh515IRoccfLymYbmZa0Pn0ljzU=w1280"
Â  ]},

Â  { type: "C", text: "<ruby>é¡Œ<rt>ã„Šã„§ËŠ</rt></ruby><ruby>ç›®<rt>ã„‡ã„¨Ë‹</rt></ruby>ï¼š<ruby>æ€<rt>ã„—ã„£Ë‡</rt></ruby><ruby>éº¼<rt>ã„‡ã„œË™</rt></ruby><ruby>æ¯”<rt>ã„…ã„§Ë‡</rt></ruby><ruby>è¼ƒ<rt>ã„ã„§ã„ Ë‹</rt></ruby>ï¼Ÿ", images: [
Â  Â  "https://lh3.googleusercontent.com/sitesv/AICyYdayUcnbt66QZKxAEk3NfmnmKJ71ALVHy6oYpUFrM2KZAm_uTvABEgJkLZh4ZqRboo9ZV4bVGBueab6K4YCaaaf7dm67uzATf4XMseK7kSZmXFfs85np7-ax6fDzPrb228SpEyqNJ0OX17FhcHKDf2CQv_Q8wFzhEbLQ0o1UtSTA0YQKfv3RRKS4y33TuWsg7TyhrfmeyUqwYjcTYm9W6XsNIyJw-d6KliW8=w1280",
Â  Â  "https://lh3.googleusercontent.com/sitesv/AICyYdaxtDdV750b2q9-g1xgDzIzuc39eLmKHP1Uz9NE_AqZXK6rMH9Hf-F92NPqKJEMhtFE5zDb0t8aCNVIKs-5oK23Qp8aKavEAu4N7kUAmD_NmDVldLTTuAY7pCuGzTIEyw_OKeWW98DVPE-7Rpi6Yu0eMY0VNrgj1jRC8bTG0QPxHmtxv-plQO2APjj7WdJJ0OnwuhF5_HGbe3CJ_S1oHGrwAQ2sfgQYt5C-=w1280"
Â  ]},

Â  { type: "C", text: "<ruby>é¡Œ<rt>ã„Šã„§ËŠ</rt></ruby><ruby>ç›®<rt>ã„‡ã„¨Ë‹</rt></ruby>ï¼š<ruby>æ€<rt>ã„—ã„£Ë‡</rt></ruby><ruby>éº¼<rt>ã„‡ã„œË™</rt></ruby><ruby>æ¯”<rt>ã„…ã„§Ë‡</rt></ruby><ruby>è¼ƒ<rt>ã„ã„§ã„ Ë‹</rt></ruby>ï¼Ÿ", images: [
Â  Â  "https://lh3.googleusercontent.com/sitesv/AICyYdZM9wE_lxsNcZArsp3TIUo5WP2LAeq88Sx17rk6wC3JPChHvM3X3kBc3Zk5iO9LpeDvGrfSzZeY2Zs1OARpXE4c4EdWIdY7ekVjQYMBmUSfZne0A4FclzWWh9JznKJi9nUieBF-wjOi_bE4sVQ-Qmz3rYxBBhoIhIM2fJ--C7AJIiY9OzIuGa8nTGVH0DKEaRBPb2S95A95SJIxb43ZsE6jKYzQ03GZ8MISi9Y=w1280",
Â  Â  "https://lh3.googleusercontent.com/sitesv/AICyYdYHBnQVxuijoTaoAqJIt656mevt_reDa2Gae4_Z2oTEJYPUOyt2gVC8GRC6mUxCxh4gqa9xo0_9T3NrqeD8kG186HUjL5BlMzMaUYUz2ZoEo3AQZUDgKeC4tnA8tAjtAByCpavzFvaMRFwWbeJsrZ7y7uuDOcqtCcg_m3oAHceQ4WN3w0mhHA7cLCwFKcABfVYLjtZ05YpJhn26Tj7m8RNs3TVOyChOcfO8kFE=w1280"
Â  ]}
];

let remaining = [...questionPool];
let drawCount = 0;
let currentQ = null;
let currentImgIndex = 0;

const marquee = document.getElementById("marquee");
const img = document.getElementById("main-image");
const startBtn = document.getElementById("start-btn");

startBtn.onclick = startMarquee;
img.onclick = handleImageClick;

// === æŠ½é¡Œå‡½å¼ ===
function startMarquee() {
Â  if (remaining.length === 0) {
Â  Â  // å°‡ 'æ‰€æœ‰é¡Œç›®éƒ½æŠ½å®Œå•¦ï¼' æ”¹ç‚ºå«æ³¨éŸ³
Â  Â  marquee.innerHTML = "<ruby>æ‰€<rt>ã„™ã„¨ã„›Ë‡</rt></ruby><ruby>æœ‰<rt>ã„§ã„¡Ë‡</rt></ruby><ruby>é¡Œ<rt>ã„Šã„§ËŠ</rt></ruby><ruby>ç›®<rt>ã„‡ã„¨Ë‹</rt></ruby><ruby>éƒ½<rt>ã„‰ã„¡</rt></ruby><ruby>æŠ½<rt>ã„”ã„¡</rt></ruby><ruby>å®Œ<rt>ã„¨ã„¢ËŠ</rt></ruby><ruby>å•¦<rt>ã„Œã„š</rt></ruby>ï¼";
Â  Â  return;
Â  }
Â  startBtn.style.display = "none";
Â  img.style.display = "none";

Â  let interval = setInterval(() => {
Â  Â  const q = remaining[Math.floor(Math.random() * remaining.length)];
Â  Â  // ä½¿ç”¨ innerHTML æ‰èƒ½è§£æ <ruby> æ¨™ç±¤
Â  Â  marquee.innerHTML = q.text;
Â  }, 100);

Â  setTimeout(() => {
Â  Â  clearInterval(interval);
Â  Â  const chosen = getNextQuestion();
Â  Â  currentQ = chosen;
Â  Â  setTimeout(() => showImage(chosen), 1000);
Â  }, 3000);
}

// === æ§åˆ¶å‰ä¸‰é¡Œå¿…å‡ºç‰¹å®šé¡å‹ (æ­¤å‡½å¼ä¸éœ€ä¿®æ”¹) ===
function getNextQuestion() {
Â  drawCount++;

Â  let filtered;
Â  if (drawCount === 1) {
Â  Â  filtered = remaining.filter(q => q.type === "A");
Â  } else if (drawCount === 2) {
Â  Â  filtered = remaining.filter(q => q.type === "B");
Â  } else if (drawCount === 3) {
Â  Â  filtered = remaining.filter(q => q.type === "C");
Â  } else {
Â  Â  filtered = remaining;
Â  }

Â  const chosen = filtered[Math.floor(Math.random() * filtered.length)];
Â  return chosen;
}

// === é¡¯ç¤ºé¡Œç›®åœ–ç‰‡ ===
function showImage(q) {
Â  // ä½¿ç”¨ innerHTML æ‰èƒ½è§£æ <ruby> æ¨™ç±¤
Â  marquee.innerHTML = q.text;
Â  img.src = q.images[0];
Â  img.style.display = "block";
Â  currentImgIndex = 0;
}

// === é»æ“Šåœ–ç‰‡é€²è¡Œåˆ‡æ›æˆ–é‡ç½® (æ­¤å‡½å¼ä¸éœ€ä¿®æ”¹) ===
function handleImageClick() {
Â  if (!currentQ) return;
Â  currentImgIndex++;
Â  if (currentImgIndex < currentQ.images.length) {
Â  Â  img.src = currentQ.images[currentImgIndex];
Â  } else {
Â  Â  resetAfterQuestion();
Â  }
}

// === é¡Œç›®å®Œæˆå¾Œé‡ç½® ===
function resetAfterQuestion() {
Â  remaining = remaining.filter(q => q !== currentQ);
Â  currentQ = null;
Â  img.style.display = "none";
Â  // å°‡ 'é»æ“Šã€Œé–‹å§‹æŠ½é¡Œã€' æ”¹ç‚ºå«æ³¨éŸ³
Â  marquee.innerHTML = "<ruby>é»<rt>ã„‰ã„§ã„¢Ë‡</rt></ruby><ruby>æ“Š<rt>ã„ã„§ËŠ</rt></ruby>ã€Œ<ruby>é–‹<rt>ã„ã„</rt></ruby><ruby>å§‹<rt>ã„•Ë‡</rt></ruby><ruby>æŠ½<rt>ã„”ã„¡</rt></ruby><ruby>é¡Œ<rt>ã„Šã„§ËŠ</rt></ruby>ã€";
Â  startBtn.style.display = "block";
}
</script>


</body>
</html>
