<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>跑馬燈抽題＋選號器（獨立運作）</title>
<style>
  body {
    margin: 0;
    font-family: "Microsoft JhengHei", sans-serif;
    display: flex;
    height: 100vh;
    background: #f8f8f8;
  }

  /* === 左側：選號器 === */
  .lottery-container {
    flex: 0 0 200px;
    background: rgba(255, 255, 255, 0.85);
    border-right: 3px solid #98d0de;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    box-shadow: 2px 0 8px rgba(0,0,0,0.1);
    text-align: center;
    padding: 20px;
  }

  .title { font-size: 20px; font-weight: bold; color: #333; margin-bottom: 10px; }
  .number-display {
    width: 70px; height: 50px;
    border: 3px solid #98d0de;
    border-radius: 8px;
    display: flex; justify-content: center; align-items: center;
    background: linear-gradient(45deg, #f8f9ff, #e8ecff);
  }
  .number { font-size: 26px; font-weight: bold; color: #98d0de; }
  .progress-bar {
    width: 120px; height: 6px;
    background: #eee; border-radius: 3px;
    margin: 10px auto; overflow: hidden;
  }
  .progress-fill {
    height: 100%;
    background: linear-gradient(45deg, #98d0de, #7bc4d4);
    width: 0%;
    transition: width 0.1s linear;
  }
  .status-text { font-size: 13px; color: #666; margin-top: 5px; }
  .lottery-btn {
    margin-top: 15px;
    padding: 6px 16px;
    background: linear-gradient(45deg, #98d0de, #7bc4d4);
    color: white;
    border: none;
    border-radius: 6px;
    cursor: pointer;
  }

  .spinning { animation: spin 0.1s linear infinite; }
  @keyframes spin {
    0% { transform: translateY(-20px); opacity: 0.5; }
    50% { transform: translateY(0); opacity: 1; }
    100% { transform: translateY(20px); opacity: 0.5; }
  }

  /* === 右側：跑馬燈／圖片顯示區 === */
  #main-area {
    flex: 1;
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: column;
    position: relative;
  }
  #marquee {
    font-size: 2rem;
    font-weight: bold;
    color: #333;
    text-align: center;
    padding: 20px;
  }
  #main-image {
    max-width: 90%;
    max-height: 85%;
    border-radius: 10px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.2);
    display: none;
  }
  #start-btn {
    margin-top: 30px;
    padding: 10px 25px;
    font-size: 1.2rem;
    background: linear-gradient(45deg, #98d0de, #7bc4d4);
    color: white;
    border: none;
    border-radius: 6px;
    cursor: pointer;
  }
</style>
</head>
<body>

<!-- 左側：選號器 -->
<div class="lottery-container">
  <div class="title">選號器</div>
  <div class="number-display"><div class="number" id="numberDisplay">?</div></div>
  <div class="progress-bar"><div class="progress-fill" id="progressFill"></div></div>
  <div class="status-text" id="statusText">等待啟動</div>
  <button class="lottery-btn" id="lotteryBtn">抽號碼</button>
</div>

<!-- 右側：題目區 -->
<div id="main-area">
  <div id="marquee">點擊「開始抽題」</div>
  <img id="main-image" src="">
  <button id="start-btn">開始抽題</button>
</div>

<script>
/* ====== 選號器控制（獨立運作） ====== */
let isRunning = false;
let animationInterval, progressInterval;

function getRandomNumber() {
  return Math.floor(Math.random() * 25) + 2; // 2~26
}

function startLottery() {
  if (isRunning) return;
  isRunning = true;

  const numberDisplay = document.getElementById('numberDisplay');
  const statusText = document.getElementById('statusText');
  const progressFill = document.getElementById('progressFill');

  numberDisplay.className = 'number spinning';
  statusText.textContent = '抽籤中...';
  progressFill.style.width = '0%';

  let progress = 0;
  const totalTime = 3000;
  const updateInterval = 50;

  animationInterval = setInterval(() => {
    numberDisplay.textContent = getRandomNumber();
  }, 100);

  progressInterval = setInterval(() => {
    progress += updateInterval;
    progressFill.style.width = (progress / totalTime) * 100 + '%';
    if (progress >= totalTime) clearInterval(progressInterval);
  }, updateInterval);

  setTimeout(() => {
    clearInterval(animationInterval);
    const finalNumber = getRandomNumber();
    numberDisplay.textContent = finalNumber;
    numberDisplay.className = 'number final-result';
    statusText.textContent = `🎉 抽中號碼：${finalNumber}`;
    progressFill.style.width = '100%';
    isRunning = false;
  }, totalTime);
}

document.getElementById("lotteryBtn").onclick = startLottery;

/* ====== 抽題邏輯 ====== */
const questionPool = [
  { type: "A", text: "題目1：有平面嗎", images: ["https://lh3.googleusercontent.com/sitesv/AICyYdYjEXnyhcVEQkat3jwBW-2icDxy_fohFaZdtbCORwg4LICsp8-ES4uAh6w4GbTsE0pzkXXD_EChGcnfCtcFSS_3W1PUH4vSsvcoVyWnLjLuyAEiaSpqVAucnqQfSEpCAbTa8ypASgSmPUL3Ob5A2LafH1KHE5t1U7zSyNu5BIcdvW1d3BQTBcGORnlsUssodLjNKJ9Oa_n_Yef-Z2I-s_w_ddWxeXXDyL7vSmU=w1280"] },
  { type: "A", text: "題目2：有平面嗎？", images: ["https://lh3.googleusercontent.com/sitesv/AICyYdY9eXHtfGCtxhVDEER378hkASZ655xeUto6RwXjEX6_jWntOPgVoMuxsZJofByWhPUQHrenuGu-k-9o32NgJtswzAXj15O9GssMM_XqT1CWWSETh6BO4cChhwCrqlCLlhXoHcAUAKV013vERwDrSE4AHdQKQHlRQ7sd3m0wQvqbjDwhxLzERBjnQBeErChGpxY3OR78HZkjvIqT4fLKZNb_c6rmGHQiJIGk=w1280"] },
  { type: "A", text: "題目3：有平面嗎？", images: ["https://lh3.googleusercontent.com/sitesv/AICyYdb535IwnRGSZni8azBcPNBfmuaUDhFBxt1TQopjjqs_F0CvO75tGUfDQtN1UMtNQu3eROCFQ4l6MCHbf8oiTe4IJH7O0gdxnut_g5ZZl2L-tW24haOeu6RXPFKub1Ua375g17iVw-NFJDyET-b-BLTM9zEBnCQWw4aQOboPCcsERTIoE8k2Mh030hi4eECJbg4JF7nBPMjx5nvBwtNfLBdQtr591kXwdkkTPhU=w1280"] },

  { type: "B", text: "題目4：哪個面比較大？", images: ["https://lh3.googleusercontent.com/sitesv/AICyYdY4YPFUy-sUATsUKYb0i1LZU1Di4L292_24n3DYch_RzVmpwMznPR649yrw40nBPSdTfrAgHoSj1Aqzky58jom7jdel-KL4jJgIIMjwnOHHF1cAdXeMhI0SY2yRCK4FAVdxiknxo0ePBTHTo2-gM2sbwDQf10WIFwtXX8eaW1sjl6tY6GcsEKrbeHXyWCKJSxwhD0UWJrdrSTnJtGpe2K-SzQsPX7O1aFuZb1k=w1280"] },
  { type: "B", text: "題目5：哪個面比較大？", images: ["https://lh3.googleusercontent.com/sitesv/AICyYdYKSouri6hJwWfGS_f-4XAtMrR5Pp8KAlCm9winr96G_dzCBNE66a2-MImgkbB0VqtM2cpfrYQBlbDrFM0OFMGehrzgzuhKgh8Xh2PDnh0jFlM2ykGtfhgAnrqEmq3ASaPFh_sWWyhlpErGxjrO28sr9tyDdhqoceFQKmG11U-azEEsCpxlP4Q8421-IWxzuN8nvfih-J90ol-1o4RPP3lR8e1Tt-isYzx8l5w=w1280"] },
  { type: "B", text: "題目6：哪個面比較大？", images: ["https://lh3.googleusercontent.com/sitesv/AICyYdb3OBuTY5jdvoz2zu32xKb-qG5kK3AePqANvkeUFncYVkMAYfJeTD6d5tDI4aXNF2I2Osx_9sNB-sNXFJIgvqMsKROdq2lz0pX4PvSd1pw7KWNaWmboOMFvpZ7iZR6eXBfSClolH0ujXptK0G4XPIiSsgnUWTLwXoDWxMw-iKulERQUf5siBG2JkwNYZr89HbtBKJy4HUGYFcvFKYZSJyBuh8D3k1ZYSnlkpac=w1280"] },

  { type: "C", text: "題目7：怎麼比較？", images: [
    "https://lh3.googleusercontent.com/sitesv/AICyYdZVwNpvUrZML4W12wZSzjnfRwPd0gY5dVbP1TihbGzuF0tS8xqTwzR2xBDVYuGx_YaBjvXo6OxQMWT9z8TALwzDMTiLWZuo1kH54NwtCAWS9zIKCUAYlnkciti2s0h50omdXZ4Jzvacpu1AfyqvTA0jEvAUshTJjkzM-CS02aW4JzQjA2bhuhkQCsCOZRFLtuBBbowSnY2IkX69G-VqcDf58IYjxXzTQc4a5dQ=w1280",
    "https://lh3.googleusercontent.com/sitesv/AICyYdbUizUyLH1n4l4GrJ5WhVe_o_ilcWlCC4KNAlH0tBVcXbkGNHLFzCxj5UIECUIr7q9fpcmKAwCSXUwXQQC1FD2V0B3_pTpPGGEJdnhGoqtb-LuRzzd1c0OKmjfJV0YMxZwc4aIS0MJc_Rx24Kvq_y0VWDUS07FnsAAYbOtdZdasMyehPt_7Wb8lTgkqh-TEqSYkXvtzH8b-IVwNV8TtAcKTqf-qNEV6Q8yV6u8=w1280"
  ]},

  { type: "C", text: "題目8：怎麼比較？", images: [
    "https://lh3.googleusercontent.com/sitesv/AICyYdaz2lZYjNZ8yd4P18wBciu8OaYCWfkIHPwPWgwnePajuXdBg-D8M88o8oKP0uepp6PuVEgXONvJNkXEOnAqx8ro4cASAv4RrSdSoxSErA381A6aOmf0K_dqFAkEcxtzYZwq7fyhywp8GGXLeRRSybX59uupvrdTJ0a1r-KAkxrSQ4nlsTzcKR9AKXv9hmq6HX_T6FSzlNf3Z-BiDWbW9uZPM2yAkxx9gdkM=w1280",
    "https://lh3.googleusercontent.com/sitesv/AICyYda-o_uPxajuXTKfhsgYpnD96wSYndiIHFNos3W8NzrKLS5i6jRNaHy6pjjR9tdhQJiAnIQVTBJco0mINPpRPh1FUsrcwoFSgXf1cL6zQm4_wLcTOFEqDAHB37Vcr0FR6pye1FUS8nAy6aSczlznoad6qxxQncKI9yCyO6hTa9a9ZlqQN0we04g-1SozKCrjMWh75GnNqMrWqNjizN5_o7V-Pzdy0YyruZt1=w1280"
  ]},

  { type: "C", text: "題目9：怎麼比較？", images: [
    "https://lh3.googleusercontent.com/sitesv/AICyYdbrsE3Kvy44DGDZnjrWxy8AMzf_6_Etr2v9MLdp7uB1xEYkSu9rbvOtPb5o_Y4KYH1twC18aRRRkr-qqlZiypppL9X4IfsYthY2_6UbVG0obIzxmq44kTJxZu0rcDtsmvNHGUimRdTAcXdiiWnThGhJGqHiNJ8Hb409t8APuDXJtPx6Qygp_UaKStHN_Wdos8zEAKwY5FhxUh-t_z3-iWozKoRltAkHjDn1S5s=w1280",
    "https://lh3.googleusercontent.com/sitesv/AICyYda0SSgJSUnDX0R2UZM7mvyfwNdEJg1yfvJT3N2BCyDx3H-3I9Cog2uPgbcQ_T2OtBu7dGteS8lX0AeZurCJKRqgdbFgcY7nycI6XwKSp5Xd0koioHc-sSlTU4W0A0Dcw_YlbnT5g2J-emv2_TVJaECLEky6nw6KvHfSaducJbI8OnmMnnH4n9Fq_Ch_kRkl5DGV6zEKIqQ4kxEc8nwCKnCRTaUWrDMjVJVu_TE=w1280"
  ]}
];

let remaining = [...questionPool];
let drawCount = 0;
let currentQ = null;
let currentImgIndex = 0;

const marquee = document.getElementById("marquee");
const img = document.getElementById("main-image");
const startBtn = document.getElementById("start-btn");

startBtn.onclick = startMarquee;
img.onclick = handleImageClick;

// === 抽題函式 ===
function startMarquee() {
  if (remaining.length === 0) {
    marquee.textContent = "所有題目都抽完啦！";
    return;
  }
  startBtn.style.display = "none";
  img.style.display = "none";

  let interval = setInterval(() => {
    const q = remaining[Math.floor(Math.random() * remaining.length)];
    marquee.textContent = q.text;
  }, 100);

  setTimeout(() => {
    clearInterval(interval);
    const chosen = getNextQuestion(); // 改：控制前三題的抽出順序
    currentQ = chosen;
    setTimeout(() => showImage(chosen), 1000);
  }, 3000);
}

// === 控制前三題必出特定類型 ===
function getNextQuestion() {
  drawCount++;

  let filtered;
  if (drawCount === 1) {
    filtered = remaining.filter(q => q.type === "A");
  } else if (drawCount === 2) {
    filtered = remaining.filter(q => q.type === "B");
  } else if (drawCount === 3) {
    filtered = remaining.filter(q => q.type === "C");
  } else {
    filtered = remaining;
  }

  const chosen = filtered[Math.floor(Math.random() * filtered.length)];
  return chosen;
}

// === 顯示題目圖片 ===
function showImage(q) {
  marquee.textContent = q.text;
  img.src = q.images[0];
  img.style.display = "block";
  currentImgIndex = 0;
}

// === 點擊圖片進行切換或重置 ===
function handleImageClick() {
  if (!currentQ) return;
  currentImgIndex++;
  if (currentImgIndex < currentQ.images.length) {
    img.src = currentQ.images[currentImgIndex];
  } else {
    resetAfterQuestion();
  }
}

// === 題目完成後重置 ===
function resetAfterQuestion() {
  remaining = remaining.filter(q => q !== currentQ);
  currentQ = null;
  img.style.display = "none";
  marquee.textContent = "點擊「開始抽題」";
  startBtn.style.display = "block";
}
</script>


</body>
</html>
