<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>å–®å…ƒå-é¢çš„å¤§å°æ¯”è¼ƒ</title>
<style>

@font-face {
  font-family: 'BpmfGenSenRounded'; /* çµ¦å­—é«”ä¸€å€‹è‡ªè¨‚åç¨± */
  /* è«‹ç¢ºèªé€™å€‹è·¯å¾‘æ˜¯æ­£ç¢ºçš„ */
  src: url('BpmfGenSenRounded-B.ttf') format('truetype'); 
  font-weight: normal;
  font-style: normal;
}
  
  body {
  margin: 0;
  /* ç¢ºä¿ç¬¬ä¸€å€‹å­—é«”åç¨±èˆ‡ @font-face ä¸­çš„ family åç¨±ä¸€è‡´ */
  font-family: "BpmfGenSenRounded", "Microsoft JhengHei", sans-serif; 
  display: flex;
  height: 100vh;
  background: #f8f8f8;
  }

  /* === å·¦å´ï¼šé¸è™Ÿå™¨ === */
  .lottery-container {
    flex: 0 0 200px;
    background: rgba(255, 255, 255, 0.85);
    border-right: 3px solid #98d0de;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    box-shadow: 2px 0 8px rgba(0,0,0,0.1);
    text-align: center;
    padding: 20px;
  }

  .title { font-size: 20px; font-weight: bold; color: #333; margin-bottom: 10px; }
  .number-display {
    width: 70px; height: 50px;
    border: 3px solid #98d0de;
    border-radius: 8px;
    display: flex; justify-content: center; align-items: center;
    background: linear-gradient(45deg, #f8f9ff, #e8ecff);
  }
  .number { font-size: 26px; font-weight: bold; color: #98d0de; }
  .progress-bar {
    width: 120px; height: 6px;
    background: #eee; border-radius: 3px;
    margin: 10px auto; overflow: hidden;
  }
  .progress-fill {
    height: 100%;
    background: linear-gradient(45deg, #98d0de, #7bc4d4);
    width: 0%;
    transition: width 0.1s linear;
  }
  .status-text { font-size: 13px; color: #666; margin-top: 5px; }
  .lottery-btn {
    margin-top: 15px;
    padding: 6px 16px;
    background: linear-gradient(45deg, #98d0de, #7bc4d4);
    color: white;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-family: "BpmfGenSenRounded", "Microsoft JhengHei", sans-serif;
  }

  .spinning { animation: spin 0.1s linear infinite; }
  @keyframes spin {
    0% { transform: translateY(-20px); opacity: 0.5; }
    50% { transform: translateY(0); opacity: 1; }
    100% { transform: translateY(20px); opacity: 0.5; }
  }

  /* === å³å´ï¼šè·‘é¦¬ç‡ˆï¼åœ–ç‰‡é¡¯ç¤ºå€ === */
  #main-area {
    flex: 1;
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: column;
    position: relative;
  }
  #marquee {
    font-size: 2rem;
    font-weight: bold;
    color: #333;
    text-align: center;
    padding: 20px;
  }
  #main-image {
    max-width: 90%;
    max-height: 85%;
    border-radius: 10px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.2);
    display: none;
  }
  #start-btn {
    margin-top: 30px;
    padding: 10px 25px;
    font-size: 1.2rem;
    background: linear-gradient(45deg, #98d0de, #7bc4d4);
    color: white;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-family: "BpmfGenSenRounded", "Microsoft JhengHei", sans-serif;
  }
</style>
</head>
<body>

<!-- å·¦å´ï¼šé¸è™Ÿå™¨ -->
<div class="lottery-container">
  <div class="title">é¸è™Ÿå™¨</div>
  <div class="number-display"><div class="number" id="numberDisplay">?</div></div>
  <div class="progress-bar"><div class="progress-fill" id="progressFill"></div></div>
  <div class="status-text" id="statusText">ç­‰å¾…å•Ÿå‹•</div>
  <button class="lottery-btn" id="lotteryBtn">æŠ½è™Ÿç¢¼</button>
</div>

<!-- å³å´ï¼šé¡Œç›®å€ -->
<div id="main-area">
  <div id="marquee">é»æ“Šã€ŒæŒ‰ã€</div>
  <img id="main-image" src="">
  <button id="start-btn">æŒ‰</button>
</div>

<script>
/* ====== é¸è™Ÿå™¨æ§åˆ¶ï¼ˆç¨ç«‹é‹ä½œï¼‰ ====== */
let isRunning = false;
let animationInterval, progressInterval;

function getRandomNumber() {
  return Math.floor(Math.random() * 25) + 2; // 2~26
}

function startLottery() {
  if (isRunning) return;
  isRunning = true;

  const numberDisplay = document.getElementById('numberDisplay');
  const statusText = document.getElementById('statusText');
  const progressFill = document.getElementById('progressFill');

  numberDisplay.className = 'number spinning';
  statusText.textContent = 'æŠ½ç±¤ä¸­...';
  progressFill.style.width = '0%';

  let progress = 0;
  const totalTime = 3000;
  const updateInterval = 50;

  animationInterval = setInterval(() => {
    numberDisplay.textContent = getRandomNumber();
  }, 100);

  progressInterval = setInterval(() => {
    progress += updateInterval;
    progressFill.style.width = (progress / totalTime) * 100 + '%';
    if (progress >= totalTime) clearInterval(progressInterval);
  }, updateInterval);

  setTimeout(() => {
    clearInterval(animationInterval);
    const finalNumber = getRandomNumber();
    numberDisplay.textContent = finalNumber;
    numberDisplay.className = 'number final-result';
    statusText.textContent = `ğŸ‰ æŠ½ä¸­è™Ÿç¢¼ï¼š${finalNumber}`;
    progressFill.style.width = '100%';
    isRunning = false;
  }, totalTime);
}

document.getElementById("lotteryBtn").onclick = startLottery;

/* ====== æŠ½é¡Œé‚è¼¯ ====== */
const questionPool = [
  { type: "A", text: "é¡Œç›®ï¼šæœ‰å¹³é¢å—", images: ["https://lh3.googleusercontent.com/sitesv/AICyYdZ8lDTWvQygvdOL6Tdb4TebBPe8o-n0uPMHVKCwYydhEjG5EsfR4AgY1u6as1-i3z97DmR9jzjVoohiwx7zpoLrGeD0RHOa7AvNhGR-3KYocknm3axKKytSFiwYjrmBiSiszx0H5AUmYM9-eUB6wtSGI0qlF61wcvshYwc8-lUqgwDefI43QslkUq_mF2TQt2t2id1rUN0qOaXRBitkSzL8l4JamGKB-_i-=w1280"] },
  { type: "A", text: "é¡Œç›®ï¼šæœ‰å¹³é¢å—ï¼Ÿ", images: ["https://lh3.googleusercontent.com/sitesv/AICyYda6LppVM2U25PWKB7At7PWMXT_gPzqAxRSPaKC3_lpXZeTmohmaf6560KxXRzJLXSVrGig-aPa_2d613enZbj3UyFnp2XDljWHg4Skyve9Zb8Ug1qoovoZXZNOrGcDzBIG_sib470yZ1NqYypRDrc3HngvIfI_qRhCY0DnYdjgiikqbdwmniQGLy9m2A6HdKq3i1beeCd2ZMuVFTNzu4mNUweTO-mkWbyBeknI=w1280"] },
  { type: "A", text: "é¡Œç›®ï¼šæœ‰å¹³é¢å—ï¼Ÿ", images: ["https://lh3.googleusercontent.com/sitesv/AICyYdZQVfc7HnpuFcNk78xvOHIB8XEdapFpUKqHxCAGd07Aig3ixnxC0knOkMWTsPHZeSc7lEKpDI6eaNv0ptQlSKqnH3SYcu8bgVHuUGdi8GcWx2yQz4rWb3tYQ-HlgNtRWc_0cGvasO-SyHCXTmL5lkWzXKz_YkfUe__x0XPlOhlk9asVrhH9UCfeAZxloNV-MGSr-iUTybnvt6qgXkl0EB3w7vSR_BwdYnmh=w1280"] },

  { type: "B", text: "é¡Œç›®ï¼šå“ªå€‹é¢æ¯”è¼ƒå¤§ï¼Ÿ", images: ["https://lh3.googleusercontent.com/sitesv/AICyYdYmXgxA4AOhJgq92t-HmOPVBFzP0x5ICu3lFKaXlramSrkrt9HfJ7T5ODHv2pcwTXNDnYlsA5Rq4cti-zRdbBKXyfqCVUtl8xtAsYGv3mCYurKG1f3lcmNE2FuZ_h9aMJowrr3EqAAy7Fk_Mpegk8Y0FzAzPmiULNQiiX6kQ9BgHh6roTosnDSSLkr79jcDMNKYd3ugpk3eP7QldLSU4vKeAVLbB6L2dySSFwc=w1280"] },
  { type: "B", text: "é¡Œç›®ï¼šå“ªå€‹é¢æ¯”è¼ƒå¤§ï¼Ÿ", images: ["https://lh3.googleusercontent.com/sitesv/AICyYdZA2JlbGauc2ZC-gOcPuKS_koR9cT0WX3reQa-r0rHOzRWqSI06XqM9ocdZDBpy68N2ANMY5tjNVc3VmJeEsb5SdsVCJPizXxO_LjAPVCabOSL4VePXSgzVcdXeIMk3VijmirFvclRTXUvtCg16RzpN4u-p0yDIe9gC1kA4Tmd2HF4Y9bwi9AgdCHZTegThLifn9zF7IWvcnOJpDaFXEB5O9d1E54R1vBoynOI=w1280"] },
  { type: "B", text: "é¡Œç›®ï¼šå“ªå€‹é¢æ¯”è¼ƒå¤§ï¼Ÿ", images: ["https://lh3.googleusercontent.com/sitesv/AICyYdYFksbRS-IqC0rK3N33FXOt2PBreXs1S9HuorapNd_kfePO7atqohfmeYhAnEffLC4qb33NuQjR9Q52DPZKtaGJvv-wdiDwz_JeUtuAfvrDvgCtU21J0PE7NDUZkOF7qedthRg_y-7L6MUvFgNtr2sT1a8005Gp0nx-H3iPLKoZyGNZMS7QQIaRCBAELqZfUkGMf1DQeHfi5M-Ytm_oDFT_0VB-T2I7J5sNASM=w1280"] },

  { type: "C", text: "é¡Œç›®ï¼šæ€éº¼æ¯”è¼ƒï¼Ÿ", images: [
    "https://lh3.googleusercontent.com/sitesv/AICyYdatMjJqCO57w-JGpkkUL1IM-u_XKAkdBKOMBUOtQoM-xkoYTjWIF-KVYD5qgzsPQejtHCFV1Ac5HxJ29hYB31rYTsE7r6CWIF9CCWxl5C28XTMxGtSdugTAg67xotZWfQcLI3hP-5l6yUpX8oRx8HejU3MgRqpwaCZ_xiSUpyzq004xYjCW03sTyptLRAdMQsRuhm-UT9FoZP4xwdsCJiRyZQC2pkgM3oXc_XQ=w1280",
    "https://lh3.googleusercontent.com/sitesv/AICyYdaowu3OvGTfzHd7S6KiTjr55ObiyBW67fTHkHEZUgIuNlHHVi0zIptpJ2pTrPlN4ntJSuYHwp5hvZL6UOHrmzMnLskKGkIehTrd9fIxoDXcV5Pbx8G3H_7ZMypyxL2VUOwFX0zLB5eKuHxpgc0_YiQiRwLH68z2dmWI0x2wrlixnBisUGT7dYJYuuVP-nmVqCdnGA3XGgWpP0PGjbYy4b8RMpER01Sbxhu9=w1280"
  ]},

  { type: "C", text: "é¡Œç›®ï¼šæ€éº¼æ¯”è¼ƒï¼Ÿ", images: [
    "https://lh3.googleusercontent.com/sitesv/AICyYdbnuZOCiFRCPyPyuAclUDO64LgL5hPWtn9kOdMoOOXv5Hhutdn5vlYK_8sXRkcqBZqUk10q2wsuYvh4RQPx7EjWB9rp65kpRqr5aA8nFLTRzBmMbeV0yNk6E7HC3HASxs-0KGgSR2ELtqJbo0GPcBsrDv3-_KytelUNCKGv3D6XzAQ6ltz7Kpfif9XOM19pv3uVnaa23QGTfwY83vx6plIwBN792z4Zb60nr3k=w1280",
    "https://lh3.googleusercontent.com/sitesv/AICyYdZKUTdQhvdQ0zOLMICBEjQBeKgPaNkhdQ4KnQj9l4NxqManRwaIiRaTknUR_Bfv1TAeEtV2OTKg3RzcPswtMWlUk0ey8jfMuqOA3PgiM5vc-bDllEqP2C9kQyEbKWFFiE5Wiq3DADYwI2wFj4hhL95jBSvyDkYsgnq7haT_XKrbJSC-HHebJyP83DHUnwTidOeeIxD5XgYJSUb2BexcL6-jrnRzdU1RcZLBY3E=w1280"
  ]},

  { type: "C", text: "é¡Œç›®ï¼šæ€éº¼æ¯”è¼ƒï¼Ÿ", images: [
    "https://lh3.googleusercontent.com/sitesv/AICyYdY1pQnZjN5ACg2_zFsXQ28SSSADy7DMVv5qUkIDiDD9c3RNFocMa4TgcN8vfJw6yrcRWLBE_9N3dBlD5tN4NnzL9V6UnlNFxhU6FTpM42vMuDFsEZydjrzYxfkEtv0JiyOtn_Svec16bOfZUciVClu_LSX65vgUGqCoLIvtIwv0jC3Tnce0oB6JMDEM__O5bvqw2-azEkay9wk_l_eMWA7GwX7Gk6XJttI-aBk=w1280",
    "https://lh3.googleusercontent.com/sitesv/AICyYdaN3PtwkK_PrlyQ2LJYTs60sbTgXF2nJTqnYGK2gkQVQKfHRkflHt5T1LKCLlrmkErIGSB2GQoXzj0QMMLkU-mpHpNBTqfSI6YNSUg9xrZOewqlu5qawvpCo28HP4UGKDiETwxoL8wQJak17HYBkkfJp5T8ce4WpoY1pNSSDFwyE9iJSUI7KAVQUZTMkacHmTgjQICuiFXeHduDny5AR7hF_LhljJggCPG9ZFk=w1280"
  ]}
];

let remaining = [...questionPool];
let drawCount = 0;
let currentQ = null;
let currentImgIndex = 0;

const marquee = document.getElementById("marquee");
const img = document.getElementById("main-image");
const startBtn = document.getElementById("start-btn");

startBtn.onclick = startMarquee;
img.onclick = handleImageClick;

// === æŠ½é¡Œå‡½å¼ ===
function startMarquee() {
  if (remaining.length === 0) {
    marquee.textContent = "æ‰€æœ‰é¡Œç›®éƒ½æŠ½å®Œå•¦ï¼";
    return;
  }
  startBtn.style.display = "none";
  img.style.display = "none";

  let interval = setInterval(() => {
    const q = remaining[Math.floor(Math.random() * remaining.length)];
    marquee.textContent = q.text;
  }, 100);

  setTimeout(() => {
    clearInterval(interval);
    const chosen = getNextQuestion(); // æ”¹ï¼šæ§åˆ¶å‰ä¸‰é¡Œçš„æŠ½å‡ºé †åº
    currentQ = chosen;
    setTimeout(() => showImage(chosen), 1000);
  }, 3000);
}

// === æ§åˆ¶å‰ä¸‰é¡Œå¿…å‡ºç‰¹å®šé¡å‹ ===
function getNextQuestion() {
  drawCount++;

  let filtered;
  if (drawCount === 1) {
    filtered = remaining.filter(q => q.type === "A");
  } else if (drawCount === 2) {
    filtered = remaining.filter(q => q.type === "B");
  } else if (drawCount === 3) {
    filtered = remaining.filter(q => q.type === "C");
  } else {
    filtered = remaining;
  }

  const chosen = filtered[Math.floor(Math.random() * filtered.length)];
  return chosen;
}

// === é¡¯ç¤ºé¡Œç›®åœ–ç‰‡ ===
function showImage(q) {
  marquee.textContent = q.text;
  img.src = q.images[0];
  img.style.display = "block";
  currentImgIndex = 0;
}

// === é»æ“Šåœ–ç‰‡é€²è¡Œåˆ‡æ›æˆ–é‡ç½® ===
function handleImageClick() {
  if (!currentQ) return;
  currentImgIndex++;
  if (currentImgIndex < currentQ.images.length) {
    img.src = currentQ.images[currentImgIndex];
  } else {
    resetAfterQuestion();
  }
}

// === é¡Œç›®å®Œæˆå¾Œé‡ç½® ===
function resetAfterQuestion() {
  remaining = remaining.filter(q => q !== currentQ);
  currentQ = null;
  img.style.display = "none";
  marquee.textContent = "é»æ“Šã€ŒæŒ‰ã€";
  startBtn.style.display = "block";
}
</script>


</body>
</html>
