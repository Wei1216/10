<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>å–®å…ƒå-é¢çš„å¤§å°æ¯”è¼ƒ</title>
<style>

/* å¦‚æœ BpmfGenSenRounded-B.ttf æª”æ¡ˆç¼ºå¤±ï¼Œè«‹å°‡æ­¤æ®µè¨»è§£æˆ–åˆªé™¤ */
@font-face {
Â  font-family: 'BpmfGenSenRounded-B';
Â  src: url('BpmfGenSenRounded-B.ttf') format('truetype');Â 
Â  font-weight: normal;
Â  font-style: normal;
}
Â Â 
Â  body {
Â  Â  margin: 0;
Â  Â  /* ç¢ºä¿ç¬¬ä¸€å€‹å­—é«”åç¨±èˆ‡ @font-face ä¸­çš„ family åç¨±ä¸€è‡´ */
Â  Â  font-family: "BpmfGenSenRounded-B", "Microsoft JhengHei", sans-serif;Â 
Â  Â  display: flex;
Â  Â  height: 100vh;
Â  Â  background: #f8f8f8;
Â  Â  
Â  Â  /* *** ä¿®æ­£ï¼šæ˜ç¢ºè¨­å®š Flexbox æ–¹å‘ *** */
Â  Â  flex-direction: row; 
Â  }

Â  /* === å·¦å´ï¼šé¸è™Ÿå™¨å®¹å™¨ === */
Â  .lottery-container {
Â  Â  /* *** ä¿®æ­£ï¼šå¢åŠ  min-width ç¢ºä¿å¯¬åº¦ä¸è¢«å…§å®¹æ“ å£“ *** */
Â  Â  flex: 0 0 200px;
Â  Â  min-width: 200px;
Â  Â  
Â  Â  background: rgba(255, 255, 255, 0.85);
Â  Â  border-right: 3px solid #98d0de;
Â  Â  display: flex;
Â  Â  flex-direction: column;
Â  Â  justify-content: center;
Â  Â  align-items: center;
Â  Â  box-shadow: 2px 0 8px rgba(0,0,0,0.1);
Â  Â  text-align: center;
Â  Â  padding: 20px;
Â  }

Â  .title { font-size: 20px; font-weight: bold; color: #333; margin-bottom: 10px; }
Â  .number-display {
Â  Â  width: 70px; height: 50px;
Â  Â  border: 3px solid #98d0de;
Â  Â  border-radius: 8px;
Â  Â  display: flex; justify-content: center; align-items: center;
Â  Â  background: linear-gradient(45deg, #f8f9ff, #e8ecff);
Â  }
Â  .number { font-size: 26px; font-weight: bold; color: #98d0de; }
Â  .progress-bar {
Â  Â  width: 120px; height: 6px;
Â  Â  background: #eee; border-radius: 3px;
Â  Â  margin: 10px auto; overflow: hidden;
Â  }
Â  .progress-fill {
Â  Â  height: 100%;
Â  Â  background: linear-gradient(45deg, #98d0de, #7bc4d4);
Â  Â  width: 0%;
Â  Â  transition: width 0.1s linear;
Â  }
Â  .status-text { font-size: 13px; color: #666; margin-top: 5px; }
Â  .lottery-btn {
Â  Â  margin-top: 15px;
Â  Â  padding: 6px 16px;
Â  Â  background: linear-gradient(45deg, #98d0de, #7bc4d4);
Â  Â  color: white;
Â  Â  border: none;
Â  Â  border-radius: 6px;
Â  Â  cursor: pointer;
Â  Â  /* ç§»é™¤å€‹åˆ¥å­—é«”è¨­å®šï¼Œç¹¼æ‰¿ body ä¸Šçš„ */
Â  }

Â  .spinning { animation: spin 0.1s linear infinite; }
Â  @keyframes spin {
Â  Â  0% { transform: translateY(-20px); opacity: 0.5; }
Â  Â  50% { transform: translateY(0); opacity: 1; }
Â  Â  100% { transform: translateY(20px); opacity: 0.5; }
Â  }
Â  
Â  /* === æ–°å¢ï¼šO/X é¸æ“‡å™¨æ¨£å¼ (èª¿æ•´å¤§å°) === */
Â  .ox-selector {
Â  Â  width: 150px; /* å¯¬åº¦èˆ‡é€²åº¦æ¢ç´„ç•¥ç›¸ç•¶ */
Â  Â  margin-top: 25px;Â 
Â  Â  padding-top: 15px;
Â  Â  border-top: 2px dashed #ccc;
Â  Â  display: flex;
Â  Â  justify-content: space-around;
Â  Â  align-items: center;
Â  Â  height: 70px; /* åƒ…æ¯”å…©å€‹æŒ‰éˆ•é«˜åº¦å¤šä¸€é» */
Â  }
Â  .ox-btn {
Â  Â  width: 60px;
Â  Â  height: 50px;
Â  Â  font-size: 24px;
Â  Â  font-weight: bold;
Â  Â  color: white;
Â  Â  border: none;
Â  Â  border-radius: 8px;
Â  Â  cursor: pointer;
Â  Â  transition: opacity 0.1s;
Â  Â  /* ç§»é™¤å€‹åˆ¥å­—é«”è¨­å®šï¼Œç¹¼æ‰¿ body ä¸Šçš„ */
Â  }
Â  #oxBtnO { background-color: #4CAF50; }
Â  #oxBtnX { background-color: #F44336; }
Â  .ox-btn:hover { opacity: 0.8; }


Â  /* === å³å´ï¼šè·‘é¦¬ç‡ˆï¼åœ–ç‰‡é¡¯ç¤ºå€ (ä¿®æ­£ z-index) === */
Â  #main-area {
Â  Â  flex: 1;
Â  Â  display: flex;
Â  Â  justify-content: center;
Â  Â  align-items: center;
Â  Â  flex-direction: column;
Â  Â  position: relative;
Â  }
Â  #marquee {
Â  Â  font-size: 2rem;
Â  Â  font-weight: bold;
Â  Â  color: #333;
Â  Â  text-align: center;
Â  Â  padding: 20px;
Â  Â  /* ç¢ºä¿è·‘é¦¬ç‡ˆä½æ–¼ O/X åœ–ç‰‡ä¹‹ä¸‹ */
Â  Â  z-index: 1;
Â  Â  position: relative;Â 
Â  }
Â  #main-image {
Â  Â  max-width: 90%;
Â  Â  max-height: 85%;
Â  Â  border-radius: 10px;
Â  Â  box-shadow: 0 4px 10px rgba(0,0,0,0.2);
Â  Â  display: none;
Â  Â  /* ç¢ºä¿åœ–ç‰‡ä½æ–¼ O/X åœ–ç‰‡ä¹‹ä¸‹ */
Â  Â  z-index: 1;
Â  Â  position: relative;Â 
Â  }
Â  #start-btn {
Â  Â  margin-top: 30px;
Â  Â  padding: 10px 25px;
Â  Â  font-size: 1.2rem;
Â  Â  background: linear-gradient(45deg, #98d0de, #7bc4d4);
Â  Â  color: white;
Â  Â  border: none;
Â  Â  border-radius: 6px;
Â  Â  cursor: pointer;
Â  Â  /* ç§»é™¤å€‹åˆ¥å­—é«”è¨­å®šï¼Œç¹¼æ‰¿ body ä¸Šçš„ */
Â  }
Â  
Â  /* === æ–°å¢ï¼šO/X åœ–ç‰‡è¦†è“‹å±¤ (è·‘é¦¬ç‡ˆæœ€ä¸Šå±¤) === */
Â  #ox-overlay {
Â  Â  position: absolute;
Â  Â  top: 0;
Â  Â  left: 0;
Â  Â  right: 0;
Â  Â  bottom: 0;
Â  Â  display: none; /* é è¨­éš±è— */
Â  Â  justify-content: center;
Â  Â  align-items: center;
Â  Â  background: rgba(255, 255, 255, 0.6); /* åŠé€æ˜èƒŒæ™¯ */
Â  Â  z-index: 10; /* ç¢ºä¿åœ¨æœ€ä¸Šå±¤ */
Â  Â  pointer-events: none; /* å…è¨±é»æ“Šç©¿é€åˆ°ä¸‹é¢çš„å…ƒç´  */
Â  }
Â  .ox-img {
Â  Â  font-size: 15vw; /* è®“ O/X ç¬¦è™Ÿéå¸¸å¤§ */
Â  Â  font-weight: bold;
Â  Â  opacity: 0;
Â  Â  /* ç°¡å–®å‹•ç•«ï¼šå‡ºç¾ã€æ”¾å¤§ã€ç„¶å¾Œæ·¡å‡º */
Â  Â  animation: fade-and-scale 1.5s ease-out forwards;
Â  }
Â  @keyframes fade-and-scale {
Â  Â  0% { transform: scale(0.5); opacity: 0; }
Â  Â  50% { transform: scale(1.1); opacity: 1; }
Â  Â  100% { transform: scale(1); opacity: 0; }
Â  }
</style>
</head>
<body>

<audio id="rollingSound" loop>
Â  Â  <source src="rolling.mp3" type="audio/mpeg">
</audio>

<audio id="chimeSound">
Â  Â  <source src="chime.mp3" type="audio/mpeg">
</audio>

<audio id="correctSound">
Â  Â  <source src="correct.mp3" type="audio/mpeg">
</audio>

<audio id="wrongSound">
Â  Â  <source src="wrong.mp3" type="audio/mpeg">
</audio>


<div class="lottery-container">
Â  <div class="title">é¸è™Ÿå™¨</div>
Â  <div class="number-display"><div class="number" id="numberDisplay">?</div></div>
Â  <div class="progress-bar"><div class="progress-fill" id="progressFill"></div></div>
Â  <div class="status-text" id="statusText">ç­‰å¾…å•Ÿå‹•</div>
Â  <button class="lottery-btn" id="lotteryBtn">æŠ½è™Ÿç¢¼</button>

Â  Â  <div class="ox-selector">
Â  Â  <button class="ox-btn" id="oxBtnO">O</button>
Â  Â  <button class="ox-btn" id="oxBtnX">X</button>
Â  </div>
</div>

<div id="main-area">
Â  Â  <div id="ox-overlay">
Â  Â  Â  Â  Â  </div>
Â  <div id="marquee">æŒ‰ã€Œé–‹å§‹æŠ½é¡Œã€</div>
Â  <img id="main-image" src="">
Â  <button id="start-btn">é–‹å§‹æŠ½é¡Œ</button>
</div>

<script>
/* ====== é¸è™Ÿå™¨æ§åˆ¶ï¼ˆç¨ç«‹é‹ä½œï¼‰ ====== */
let isRunning = false;
let animationInterval, progressInterval;

// å–å¾—éŸ³æ•ˆå…ƒç´ 
const rollingSound = document.getElementById('rollingSound');
const chimeSound = document.getElementById('chimeSound');
const correctSound = document.getElementById('correctSound'); // æ–°å¢
const wrongSound = document.getElementById('wrongSound');Â Â // æ–°å¢


function getRandomNumber() {
Â  return Math.floor(Math.random() * 25) + 2; // 2~26
}

function startLottery() {
Â  if (isRunning) return;
Â  isRunning = true;

Â  const numberDisplay = document.getElementById('numberDisplay');
Â  const statusText = document.getElementById('statusText');
Â  const progressFill = document.getElementById('progressFill');

Â  numberDisplay.className = 'number spinning';
Â  statusText.textContent = 'æŠ½ç±¤ä¸­...';
Â  progressFill.style.width = '0%';

Â  // é–‹å§‹æ’­æ”¾æ»¾å‹•éŸ³æ•ˆ
Â  if(rollingSound) {
Â  Â  rollingSound.currentTime = 0;Â 
Â  Â  rollingSound.play().catch(e => console.error("æ»¾å‹•éŸ³æ•ˆæ’­æ”¾å¤±æ•—:", e));Â 
Â  }

Â  let progress = 0;
Â  const totalTime = 2000;
Â  const updateInterval = 50;

Â  animationInterval = setInterval(() => {
Â  Â  numberDisplay.textContent = getRandomNumber();
Â  }, 100);

Â  progressInterval = setInterval(() => {
Â  Â  progress += updateInterval;
Â  Â  progressFill.style.width = (progress / totalTime) * 100 + '%';
Â  Â  if (progress >= totalTime) clearInterval(progressInterval);
Â  }, updateInterval);

Â  setTimeout(() => {
Â  Â  clearInterval(animationInterval);

Â  Â  // åœæ­¢æ»¾å‹•éŸ³æ•ˆä¸¦æ’­æ”¾çµæŸéŸ³æ•ˆ
Â  Â  if(rollingSound) rollingSound.pause();Â 
Â  Â  if(chimeSound) {
Â  Â  Â  Â  chimeSound.currentTime = 0;
Â  Â  Â  Â  chimeSound.play().catch(e => console.error("çµæŸéŸ³æ•ˆæ’­æ”¾å¤±æ•—:", e));
Â  Â  }
Â  Â Â 
Â  Â  const finalNumber = getRandomNumber();
Â  Â  numberDisplay.textContent = finalNumber;
Â  Â  numberDisplay.className = 'number final-result';
Â  Â  statusText.textContent = `ğŸ‰ æŠ½ä¸­è™Ÿç¢¼ï¼š${finalNumber}`;
Â  Â  progressFill.style.width = '100%';
Â  Â  isRunning = false;
Â  }, totalTime);
}

document.getElementById("lotteryBtn").onclick = startLottery;

/* ====== æ–°å¢ï¼šO/X é¸æ“‡å™¨é‚è¼¯ ====== */
const oxOverlay = document.getElementById('ox-overlay');

function handleOxClick(type) {
Â  Â  // æ±ºå®šåœ–ç‰‡å…§å®¹å’ŒéŸ³æ•ˆ
Â  Â  let content, soundElement;
Â  Â  if (type === 'O') {
Â  Â  Â  Â  // ä½¿ç”¨ Unicode å‹¾è™Ÿä½œç‚º O çš„åœ–ç‰‡æ›¿ä»£ï¼Œä¸¦åŠ ä¸Šç¶ è‰²
Â  Â  Â  Â  content = `<div class="ox-img" style="color: #4CAF50;">&#10004;</div>`;Â 
Â  Â  Â  Â  soundElement = correctSound;
Â  Â  } else { // X
Â  Â  Â  Â  // ä½¿ç”¨ Unicode å‰è™Ÿä½œç‚º X çš„åœ–ç‰‡æ›¿ä»£ï¼Œä¸¦åŠ ä¸Šç´…è‰²
Â  Â  Â  Â  content = `<div class="ox-img" style="color: #F44336;">&#10008;</div>`;Â 
Â  Â  Â  Â  soundElement = wrongSound;
Â  Â  }

Â  Â  // 1. é¡¯ç¤º O/X åœ–ç‰‡ (åœ¨è·‘é¦¬ç‡ˆæœ€ä¸Šå±¤)
Â  Â  oxOverlay.innerHTML = content;
Â  Â  oxOverlay.style.display = 'flex';
Â  Â Â 
Â  Â  // 2. æ’­æ”¾éŸ³æ•ˆ
Â  Â  if (soundElement) {
Â  Â  Â  Â  soundElement.currentTime = 0;
Â  Â  Â  Â  soundElement.play().catch(e => console.error(`æ’­æ”¾ ${type} éŸ³æ•ˆå¤±æ•—:`, e));
Â  Â  }

Â  Â  // 3. åœ–ç‰‡å’ŒéŸ³æ•ˆæ’­æ”¾å®Œç•¢å¾Œï¼Œéš±è—è¦†è“‹å±¤ (èˆ‡ CSS å‹•ç•«æ™‚é–“åŒæ­¥)
Â  Â  setTimeout(() => {
Â  Â  Â  Â  oxOverlay.style.display = 'none';
Â  Â  Â  Â  oxOverlay.innerHTML = ''; // æ¸…ç©ºå…§å®¹
Â  Â  }, 1500); // 1.5 ç§’èˆ‡ CSS å‹•ç•«æ™‚é–“ä¿æŒä¸€è‡´
}

document.getElementById("oxBtnO").onclick = () => handleOxClick('O');
document.getElementById("oxBtnX").onclick = () => handleOxClick('X');

/* ====== æŠ½é¡Œé‚è¼¯ (ä¿æŒä¸è®Š) ====== */
const questionPool = [
Â  { type: "A", text: "é¡Œç›®ï¼šæœ‰å¹³é¢å—ï¼Ÿ", images: ["15.png"] },
Â  { type: "A", text: "é¡Œç›®ï¼šæœ‰å¹³é¢å—ï¼Ÿ", images: ["19.png"] },
Â  { type: "A", text: "é¡Œç›®ï¼šæœ‰å¹³é¢å—ï¼Ÿ", images: ["23.png"] },

Â  { type: "B", text: "é¡Œç›®ï¼šå“ªå€‹é¢æ¯”è¼ƒå¤§ï¼Ÿ", images: ["16.png"] },
Â  { type: "B", text: "é¡Œç›®ï¼šå“ªå€‹é¢æ¯”è¼ƒå¤§ï¼Ÿ", images: ["20.png"] },
Â  { type: "B", text: "é¡Œç›®ï¼šå“ªå€‹é¢æ¯”è¼ƒå¤§ï¼Ÿ", images: ["24.png"] },

Â  { type: "C", text: "é¡Œç›®ï¼šæ€éº¼æ¯”è¼ƒï¼Ÿ", images: [
Â  Â  "17.png",
Â  Â  "18.png"
Â  ]},

Â  { type: "C", text: "é¡Œç›®ï¼šæ€éº¼æ¯”è¼ƒï¼Ÿ", images: [
Â  Â  "21.png",
Â  Â  "22.png"
Â  ]},

Â  { type: "C", text: "é¡Œç›®ï¼šæ€éº¼æ¯”è¼ƒï¼Ÿ", images: [
Â  Â  "25.png",
Â  Â  "26.png"
Â  ]}
];

let remaining = [...questionPool];
let drawCount = 0;
let currentQ = null;
let currentImgIndex = 0;

const marquee = document.getElementById("marquee");
const img = document.getElementById("main-image");
const startBtn = document.getElementById("start-btn");

startBtn.onclick = startMarquee;
img.onclick = handleImageClick;

// === æŠ½é¡Œå‡½å¼ (åŒ…å« 1 ç§’å»¶é²é‚è¼¯) ===
function startMarquee() {
Â  if (remaining.length === 0) {
Â  Â  marquee.textContent = "æ‰€æœ‰é¡Œç›®éƒ½æŠ½å®Œå•¦ï¼";
Â  Â  return;
Â  }
Â  startBtn.style.display = "none";
Â  img.style.display = "none";
Â  // åœ–ç‰‡è·³å‡ºå‰ï¼Œç¢ºä¿æ–‡å­—æ˜¯é¡¯ç¤ºçš„
Â  marquee.style.display = "block";Â 

Â  let interval = setInterval(() => {
Â  Â  const q = remaining[Math.floor(Math.random() * remaining.length)];
Â  Â  marquee.textContent = q.text;
Â  }, 100);

Â  // ç¬¬ä¸€å±¤ setTimeout: 3ç§’å¾Œåœæ­¢è·‘é¦¬ç‡ˆ
Â  setTimeout(() => {
Â  Â  clearInterval(interval);
Â  Â  const chosen = getNextQuestion(); // ç¢ºå®šæœ€çµ‚é¡Œç›®
Â  Â  currentQ = chosen;

Â  Â  // å°‡è·‘é¦¬ç‡ˆå…§å®¹å›ºå®šç‚ºæœ€çµ‚é¡Œç›®æ–‡å­—ï¼Œæº–å‚™åœç•™
Â  Â  marquee.textContent = chosen.text;

Â  Â  // ç¬¬äºŒå±¤ setTimeout: å†ç­‰ 1 ç§’å¾Œæ‰é¡¯ç¤ºåœ–ç‰‡ä¸¦éš±è—æ–‡å­—
Â  Â  setTimeout(() => {
Â  Â  Â  showImage(chosen);Â 
Â  Â  }, 1000); // 1000 æ¯«ç§’ = 1 ç§’

Â  }, 3000);
}

// === æ§åˆ¶å‰ä¸‰é¡Œå¿…å‡ºç‰¹å®šé¡å‹ ===
function getNextQuestion() {
Â  drawCount++;

Â  let filtered;
Â  if (drawCount === 1) {
Â  Â  filtered = remaining.filter(q => q.type === "A");
Â  } else if (drawCount === 2) {
Â  Â  filtered = remaining.filter(q => q.type === "B");
Â  } else if (drawCount === 3) {
Â  Â  filtered = remaining.filter(q => q.type === "C");
Â  } else {
Â  Â  filtered = remaining;
Â  }

Â  const chosen = filtered[Math.floor(Math.random() * filtered.length)];
Â  return chosen;
}

// === é¡¯ç¤ºé¡Œç›®åœ–ç‰‡ ===
function showImage(q) {
Â  // éš±è—é¡Œç›®æ–‡å­—
Â  marquee.style.display = "none";Â 
Â Â 
Â  // é¡¯ç¤ºåœ–ç‰‡
Â  img.src = q.images[0];
Â  img.style.display = "block";
Â  currentImgIndex = 0;
}

// === é»æ“Šåœ–ç‰‡é€²è¡Œåˆ‡æ›æˆ–é‡ç½® ===
function handleImageClick() {
Â  if (!currentQ) return;
Â  currentImgIndex++;
Â  if (currentImgIndex < currentQ.images.length) {
Â  Â  img.src = currentQ.images[currentImgIndex];
Â  } else {
Â  Â  resetAfterQuestion();
Â  }
}

// === é¡Œç›®å®Œæˆå¾Œé‡ç½® ===
function resetAfterQuestion() {
Â  remaining = remaining.filter(q => q !== currentQ);
Â  currentQ = null;
Â  img.style.display = "none";
Â Â 
Â  // é‡æ–°é¡¯ç¤ºé¡Œç›®æ–‡å­—ä¸¦è¨­å®šå…§å®¹
Â  marquee.textContent = "æŒ‰ã€Œé–‹å§‹æŠ½é¡Œã€";
Â  marquee.style.display = "block";Â 

Â  startBtn.style.display = "block";
}
</script>


</body>
</html>
