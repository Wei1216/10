<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>å–®å…ƒå-é¢çš„å¤§å°æ¯”è¼ƒ</title>
<style>
@font-face {
Â  font-family: 'BpmfGenSenRounded-B';
Â  src: url('BpmfGenSenRounded-B.ttf') format('truetype');
Â  font-weight: normal;
Â  font-style: normal;
}
body {
Â  margin: 0;
Â  font-family: "BpmfGenSenRounded-B", "Microsoft JhengHei", sans-serif;
Â  display: flex;
Â  height: 100vh;
Â  background: #f8f8f8;
}

/* === å·¦å´ï¼šé¸è™Ÿå™¨ - å¯¬åº¦ 200pxï¼Œå…§å®¹ç·Šæ¹ŠåŒ– === */
.lottery-container {
Â  flex: 0 0 200px; /* **å¯¬åº¦è¨­å®šç‚º 200px** */
Â  background: rgba(255, 255, 255, 0.85);
Â  border-right: 3px solid #98d0de;
Â  display: flex;
Â  flex-direction: column;
Â  justify-content: flex-start; /* å…§å®¹é ä¸Š */
Â  align-items: center;
Â  box-shadow: 2px 0 8px rgba(0,0,0,0.1);
Â  text-align: center;
Â  padding: 5px 10px; /* **æ¸›å°‘ padding ä½¿å…¶ç·Šæ¹Š** */
}
.title { font-size: 20px; font-weight: bold; color: #333; margin-top: 5px; margin-bottom: 5px; } /* èª¿æ•´ margin */
.number-display {
Â  width: 70px; 
Â  height: 40px; /* ç¸®å°é«˜åº¦ */
Â  border: 3px solid #98d0de;
Â  border-radius: 8px;
Â  display: flex; justify-content: center; align-items: center;
Â  background: linear-gradient(45deg, #f8f9ff, #e8ecff);
}
.number { font-size: 24px; font-weight: bold; color: #98d0de; } /* èª¿æ•´å­—é«”å¤§å° */
.progress-bar {
Â  width: 100px; /* èª¿æ•´å¯¬åº¦ */
Â  height: 4px; /* ç¸®å°é«˜åº¦ */
Â  background: #eee; border-radius: 3px;
Â  margin: 5px auto; overflow: hidden;
}
.progress-fill {
Â  height: 100%;
Â  background: linear-gradient(45deg, #98d0de, #7bc4d4);
Â  width: 0%;
Â  transition: width 0.1s linear;
}
.status-text { font-size: 13px; color: #666; margin-top: 2px; } /* èª¿æ•´ margin */
.lottery-btn {
Â  margin-top: 8px; /* èª¿æ•´ margin */
Â  padding: 4px 12px; /* ç¸®å°æŒ‰éˆ• */
Â  background: linear-gradient(45deg, #98d0de, #7bc4d4);
Â  color: white;
Â  border: none;
Â  border-radius: 6px;
Â  cursor: pointer;
Â  font-family: "BpmfGenSenRounded-B", "Microsoft JhengHei", sans-serif;
}

/* åœˆå‰æŒ‰éˆ•å€ */
.choice-buttons {
Â  display: flex;
Â  gap: 5px; /* æ¸›å°‘é–“è· */
Â  margin-top: auto; /* å›ºå®šåœ¨åº•éƒ¨ */
Â  margin-bottom: 5px; /* æ¸›å°‘åº•éƒ¨ç©ºé–“ */
}
.choice-btn {
Â  font-size: 20px; /* ç¸®å°å­—é«” */
Â  width: 40px; /* ç¸®å°æŒ‰éˆ• */
Â  height: 40px; /* ç¸®å°æŒ‰éˆ• */
Â  border: none;
Â  border-radius: 50%;
Â  cursor: pointer;
Â  background: #fff;
Â  box-shadow: 0 2px 4px rgba(0,0,0,0.15);
Â  transition: transform 0.2s;
}
.choice-btn:hover {
Â  transform: scale(1.1);
}
.choice-btn.circle { color: #4CAF50; }
.choice-btn.cross { color: #F44336; }

.spinning { animation: spin 0.1s linear infinite; }
@keyframes spin {
Â  0% { transform: translateY(-20px); opacity: 0.5; }
Â  50% { transform: translateY(0); opacity: 1; }
Â  100% { transform: translateY(20px); opacity: 0.5; }
}

/* === å³å´ï¼šè·‘é¦¬ç‡ˆï¼åœ–ç‰‡é¡¯ç¤ºå€ === */
#main-area {
Â  flex: 1;
Â  display: flex;
Â  justify-content: center;
Â  align-items: center;
Â  flex-direction: column;
Â  position: relative;
}
#marquee {
Â  font-size: 2rem;
Â  font-weight: bold;
Â  color: #333;
Â  text-align: center;
Â  padding: 20px;
}
#main-image {
Â  max-width: 90%;
Â  max-height: 85%;
Â  border-radius: 10px;
Â  box-shadow: 0 4px 10px rgba(0,0,0,0.2);
Â  display: none;
}
#start-btn {
Â  margin-top: 30px;
Â  padding: 10px 25px;
Â  font-size: 1.2rem;
Â  background: linear-gradient(45deg, #98d0de, #7bc4d4);
Â  color: white;
Â  border: none;
Â  border-radius: 6px;
Â  cursor: pointer;
Â  font-family: "BpmfGenSenRounded-B", "Microsoft JhengHei", sans-serif;
}

/* é¡¯ç¤ºç¬¦è™Ÿå‹•ç•« */
.symbol-display {
Â  position: absolute;
Â  font-size: 8rem;
Â  opacity: 0;
Â  transition: opacity 0.3s, transform 0.3s;
}
.symbol-display.show {
Â  opacity: 1;
Â  transform: scale(1.2);
}
</style>
</head>
<body>

<audio id="rollingSound" loop>
Â  <source src="rolling.mp3" type="audio/mpeg">
</audio>
<audio id="chimeSound">
Â  <source src="chime.mp3" type="audio/mpeg">
</audio>
<audio id="correctSound">
Â  <source src="correct.mp3" type="audio/mpeg">
</audio>
<audio id="wrongSound">
Â  <source src="wrong.mp3" type="audio/mpeg">
</audio>

<div class="lottery-container">
Â  <div class="title">é¸è™Ÿå™¨</div>
Â  <div class="number-display"><div class="number" id="numberDisplay">?</div></div>
Â  <div class="progress-bar"><div class="progress-fill" id="progressFill"></div></div>
Â  <div class="status-text" id="statusText">ç­‰å¾…å•Ÿå‹•</div>
Â  <button class="lottery-btn" id="lotteryBtn">æŠ½è™Ÿç¢¼</button>

Â  Â  <div class="choice-buttons">
Â  Â  <button class="choice-btn circle" id="circleBtn">â­•</button>
Â  Â  <button class="choice-btn cross" id="crossBtn">âŒ</button>
Â  </div>
</div>

<div id="main-area">
Â  <div id="marquee">æŒ‰ã€Œé–‹å§‹æŠ½é¡Œã€</div>
Â  <img id="main-image" src="">
Â  <div class="symbol-display" id="symbolDisplay"></div>
Â  <button id="start-btn">é–‹å§‹æŠ½é¡Œ</button>
</div>

<script>
/* ====== é¸è™Ÿå™¨æ§åˆ¶ ====== */
let isRunning = false;
let animationInterval, progressInterval;
let canDraw = true;

const rollingSound = document.getElementById('rollingSound');
const chimeSound = document.getElementById('chimeSound');
const correctSound = document.getElementById('correctSound');
const wrongSound = document.getElementById('wrongSound');

function getRandomNumber() {
Â  return Math.floor(Math.random() * 25) + 2;
}

function startLottery() {
Â  if (isRunning) return;
Â  isRunning = true;

Â  const numberDisplay = document.getElementById('numberDisplay');
Â  const statusText = document.getElementById('statusText');
Â  const progressFill = document.getElementById('progressFill');

Â  numberDisplay.className = 'number spinning';
Â  statusText.textContent = 'æŠ½ç±¤ä¸­...';
Â  progressFill.style.width = '0%';
Â  if (rollingSound) { rollingSound.currentTime = 0; rollingSound.play().catch(()=>{}); }

Â  let progress = 0;
Â  const totalTime = 2000;
Â  const updateInterval = 50;

Â  animationInterval = setInterval(() => {
Â  Â  numberDisplay.textContent = getRandomNumber();
Â  }, 100);

Â  progressInterval = setInterval(() => {
Â  Â  progress += updateInterval;
Â  Â  progressFill.style.width = (progress / totalTime) * 100 + '%';
Â  Â  if (progress >= totalTime) clearInterval(progressInterval);
Â  }, updateInterval);

Â  setTimeout(() => {
Â  Â  clearInterval(animationInterval);
Â  Â  if (rollingSound) rollingSound.pause();
Â  Â  if (chimeSound) { chimeSound.currentTime = 0; chimeSound.play().catch(()=>{}); }
Â  Â  const finalNumber = getRandomNumber();
Â  Â  numberDisplay.textContent = finalNumber;
Â  Â  numberDisplay.className = 'number final-result';
Â  Â  statusText.textContent = `ğŸ‰ æŠ½ä¸­è™Ÿç¢¼ï¼š${finalNumber}`;
Â  Â  progressFill.style.width = '100%';
Â  Â  isRunning = false;
Â  }, totalTime);
}

document.getElementById("lotteryBtn").onclick = startLottery;

/* ====== æŠ½é¡Œé‚è¼¯ ====== */
const questionPool = [
Â  { type: "A", text: "é¡Œç›®ï¼šæœ‰å¹³é¢å—ï¼Ÿ", images: ["15.png"] },
Â  { type: "A", text: "é¡Œç›®ï¼šæœ‰å¹³é¢å—ï¼Ÿ", images: ["19.png"] },
Â  { type: "A", text: "é¡Œç›®ï¼šæœ‰å¹³é¢å—ï¼Ÿ", images: ["23.png"] },
Â  { type: "B", text: "é¡Œç›®ï¼šå“ªå€‹é¢æ¯”è¼ƒå¤§ï¼Ÿ", images: ["16.png"] },
Â  { type: "B", text: "é¡Œç›®ï¼šå“ªå€‹é¢æ¯”è¼ƒå¤§ï¼Ÿ", images: ["20.png"] },
Â  { type: "B", text: "é¡Œç›®ï¼šå“ªå€‹é¢æ¯”è¼ƒå¤§ï¼Ÿ", images: ["24.png"] },
Â  { type: "C", text: "é¡Œç›®ï¼šæ€éº¼æ¯”è¼ƒï¼Ÿ", images: ["17.png","18.png"] },
Â  { type: "C", text: "é¡Œç›®ï¼šæ€éº¼æ¯”è¼ƒï¼Ÿ", images: ["21.png","22.png"] },
Â  { type: "C", text: "é¡Œç›®ï¼šæ€éº¼æ¯”è¼ƒï¼Ÿ", images: ["25.png","26.png"] }
];

let remaining = [...questionPool];
let drawCount = 0;
let currentQ = null;
let currentImgIndex = 0;

const marquee = document.getElementById("marquee");
const img = document.getElementById("main-image");
const startBtn = document.getElementById("start-btn");
const symbolDisplay = document.getElementById("symbolDisplay");

startBtn.onclick = startMarquee;
img.onclick = handleImageClick;

function startMarquee() {
Â  if (!canDraw) return;
Â  if (remaining.length === 0) {
Â  Â  marquee.textContent = "æ‰€æœ‰é¡Œç›®éƒ½æŠ½å®Œå•¦ï¼";
Â  Â  return;
Â  }
Â  startBtn.style.display = "none";
Â  img.style.display = "none";
Â  marquee.style.display = "block";Â Â 

Â  let interval = setInterval(() => {
Â  Â  const q = remaining[Math.floor(Math.random() * remaining.length)];
Â  Â  marquee.textContent = q.text;
Â  }, 100);

Â  setTimeout(() => {
Â  Â  clearInterval(interval);
Â  Â  const chosen = getNextQuestion();
Â  Â  currentQ = chosen;
Â  Â  marquee.textContent = chosen.text;

Â  Â  setTimeout(() => {
Â  Â  Â  showImage(chosen);Â 
Â  Â  }, 1000);
Â  }, 3000);
}

function getNextQuestion() {
Â  drawCount++;
Â  let filtered;
Â  if (drawCount === 1) filtered = remaining.filter(q => q.type === "A");
Â  else if (drawCount === 2) filtered = remaining.filter(q => q.type === "B");
Â  else if (drawCount === 3) filtered = remaining.filter(q => q.type === "C");
Â  else filtered = remaining;
Â  return filtered[Math.floor(Math.random() * filtered.length)];
}

function showImage(q) {
Â  marquee.style.display = "none";Â Â 
Â  img.src = q.images[0];
Â  img.style.display = "block";
Â  currentImgIndex = 0;
}

function handleImageClick() {
Â  if (!currentQ) return;
Â  currentImgIndex++;
Â  if (currentImgIndex < currentQ.images.length) {
Â  Â  img.src = currentQ.images[currentImgIndex];
Â  } else {
Â  Â  resetAfterQuestion();
Â  }
}

function resetAfterQuestion() {
Â  remaining = remaining.filter(q => q !== currentQ);
Â  currentQ = null;
Â  img.style.display = "none";
Â  marquee.textContent = "æŒ‰ã€Œé–‹å§‹æŠ½é¡Œã€";
Â  marquee.style.display = "block";Â Â 
Â  startBtn.style.display = "block";
}

/* ====== åœˆå‰æŒ‰éˆ•è¡Œç‚º ====== */
document.getElementById("circleBtn").onclick = () => showSymbol("â­•", correctSound);
document.getElementById("crossBtn").onclick = () => showSymbol("âŒ", wrongSound);

function showSymbol(symbol, sound) {
Â  if (!canDraw) return;
Â  canDraw = false;
Â  img.style.display = "none";
Â  marquee.style.display = "none";
Â  symbolDisplay.textContent = symbol;
Â  symbolDisplay.classList.add("show");
Â  if (sound) { sound.currentTime = 0; sound.play().catch(()=>{}); }
Â  setTimeout(() => {
Â  Â  symbolDisplay.classList.remove("show");
Â  Â  symbolDisplay.textContent = "";
Â  Â  canDraw = true;
Â  }, 2000);
}
</script>
</body>
</html>
